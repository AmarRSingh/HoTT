<html>
<head>
<title>Trunc.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Trunc.v</h1>

<div class="code" title="File: Trunc.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*-  *)
(** * Truncatedness *)


</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 4
Time: 0.017s">
<div class="time" style="width: 9.3406593406593%"></div>
<pre>Require Import Overture Contractible Equivalences types.Paths types.Unit.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope trunc_scope.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Generalizable Variables A B m n f.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 8
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Arithmetic on truncation-levels. *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Fixpoint trunc_index_add (m n : trunc_index) : trunc_index
  := match m with
       | minus_two =&gt; n
       | trunc_S m' =&gt; trunc_S (trunc_index_add m' n)
     end.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "m -2+ n" := (trunc_index_add m n) (at level 50, left associativity) : trunc_scope.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 16
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>

Fixpoint trunc_index_leq (m n : trunc_index) : Type
  := match m, n with
       | minus_two, _ =&gt; Unit
       | trunc_S m', minus_two =&gt; Empty
       | trunc_S m', trunc_S n' =&gt; trunc_index_leq m' n'
     end.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Notation "m &lt;= n" := (trunc_index_leq m n) (at level 70, no associativity) : trunc_scope.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Truncatedness proper. *)

(** A contractible space is (-2)-truncated, by definition. *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition contr_trunc_minus_two `{H : IsTrunc minus_two A} : Contr A
  := H.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Truncation levels are cumulative. *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Instance trunc_succ `{IsTrunc n A} : IsTrunc (trunc_S n) A | 1000.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  generalize dependent A.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 34
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>
  induction n as [| n I]; simpl; intros A H x y.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply contr_paths_contr.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply I, H.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 37
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Instance trunc_leq {m n} (Hmn : m &lt;= n) `{IsTrunc m A} : IsTrunc n A | 1000.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  generalize dependent A; generalize dependent m.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 42
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>
  induction n as [ | n' IH];
    intros [ | m'] Hmn A ? .</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> (* -2, -2 *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>assumption.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> (* S m', -2 *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>destruct Hmn.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> (* -2, S n' *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 47
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>apply @trunc_succ, (IH minus_two); auto.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> (* S m', S n' *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 48
Time: 0.002s">
<div class="time" style="width: 1.0989010989011%"></div>
<pre>intros x y; apply (IH m');
                     auto with typeclass_instances.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 49
Time: 0.002s">
<div class="time" style="width: 1.0989010989011%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 50
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Equivalence preserves truncation (this is, of course, trivial with univalence).
   This is not an [Instance] because it causes infinite loops.
   *)</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Definition trunc_equiv `(f : A -&gt; B)
  `{IsTrunc n A} `{IsEquiv A B f}
  : IsTrunc n B.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 57
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  generalize dependent f; revert B; generalize dependent A.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 58
Time: 0.001s">
<div class="time" style="width: 0.54945054945055%"></div>
<pre>
  induction n as [| n I]; simpl; intros A ? B f ?.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> refine (contr_equiv f).</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros x y.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 61
Time: 0.008s">
<div class="time" style="width: 4.3956043956044%"></div>
<pre>
    pose proof (fun X Y =&gt; I (f^-1 x = f^-1 y) X (x = y) ((ap (f^-1))^-1) Y).</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 62
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    clear I.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 63
Time: 0.182s">
<div class="time" style="width: 100%"></div>
<pre>
    typeclasses eauto.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 64
Time: 0.003s">
<div class="time" style="width: 1.6483516483516%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 65
Time: 0.002s">
<div class="time" style="width: 1.0989010989011%"></div>
<pre>

Definition trunc_equiv' `(f : A &lt;~&gt; B) `{IsTrunc n A}
  : IsTrunc n B
  := trunc_equiv f.</pre>
</div>
<div class="code" title="File: Trunc.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

