<html>
<head>
<title>Paths.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Paths.v</h1>

<div class="code" title="File: Paths.v
Line: 1
Time: 0.006s">
<div class="time" style="width: 0.20318320352184%"></div>
<pre>Require Import Category.Core Functor.Core.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 1
Time: 0.033s">
<div class="time" style="width: 1.1175076193701%"></div>
<pre>
Require Import HProp HoTT.Tactics Equivalences PathGroupoids types.Sigma Trunc types.Record.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope morphism_scope.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope functor_scope.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 10
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section path_functor.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Variable C : PreCategory.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variable D : PreCategory.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Local Notation functor_sig_T :=
    { OO : C -&gt; D
    | { MO : forall s d, morphism C s d -&gt; morphism D (OO s) (OO d)
      | { FCO : forall s d d' (m1 : morphism C s d) (m2 : morphism C d d'),
                  MO _ _ (m2 o m1) = MO d d' m2 o MO s d m1
        | forall x,
            MO x x (identity x) = identity (OO x) } } }
      (only parsing).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 27
Time: 0.022s">
<div class="time" style="width: 0.74500507958009%"></div>
<pre>

  Lemma equiv_sig_functor
  : functor_sig_T &lt;~&gt; Functor C D.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 31
Time: 2.401s">
<div class="time" style="width: 81.307145275991%"></div>
<pre>
    issig (@Build_Functor C D) (@object_of C D) (@morphism_of C D) (@composition_of C D) (@identity_of C D).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 32
Time: 0.979s">
<div class="time" style="width: 33.152726041314%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We could leave it at that and be done with it, but we want a more convenient form for actually constructing paths between functors.  For this, we write a trimmed down version of something equivalent to the type of paths between functors. *)

 </pre>
</div>
<div class="code" title="File: Paths.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Notation path_functor'_T F G
    := { HO : object_of F = object_of G
       | transport (fun GO =&gt; forall s d, morphism C s d -&gt; morphism D (GO s) (GO d))
                   HO
                   (morphism_of F)
         = morphism_of G }
         (only parsing).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** We could just go prove that the path space of [functor_sig_T] is equivalent to [path_functor'_T], but unification is far too slow to do this effectively.  So instead we explicitly classify [path_functor'_T], and provide an equivalence between it and the path space of [Functor C D]. *)

  (*Definition equiv_path_functor'_sig_sig (F G : Functor C D)
  : path_functor'_T F G &lt;~&gt; (@equiv_inv _ _ _ equiv_sig_functor F
                              = @equiv_inv _ _ _ equiv_sig_functor G).
  Proof.
    etransitivity; [ | by apply equiv_path_sigma ].
    eapply @equiv_functor_sigma.
    repeat match goal with
             | [ |- appcontext[(@equiv_inv ?A ?B ?f ?H ?F).1] ]
               =&gt; change ((@equiv_inv A B f H F).1) with (object_of F)
           end.
    exact (isequiv_idmap (object_of F = object_of G)).
  Abort.*)

 </pre>
</div>
<div class="code" title="File: Paths.v
Line: 60
Time: 0.013s">
<div class="time" style="width: 0.44023027429732%"></div>
<pre>Definition path_functor'_sig (F G : Functor C D) : path_functor'_T F G -&gt; F = G.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 60
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 61
Time: 0.047s">
<div class="time" style="width: 1.5916017609211%"></div>
<pre>
    intros [? ?].</pre>
</div>
<div class="code" title="File: Paths.v
Line: 62
Time: 0.122s">
<div class="time" style="width: 4.1313918049441%"></div>
<pre>
    destruct F, G; simpl in *.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 63
Time: 0.119s">
<div class="time" style="width: 4.0298002031832%"></div>
<pre>
    path_induction; simpl.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 64
Time: 0.494s">
<div class="time" style="width: 16.728750423298%"></div>
<pre>
    f_ap;
      eapply @center; abstract exact _.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 66
Time: 0.162s">
<div class="time" style="width: 5.4859464950897%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 67
Time: 0.059s">
<div class="time" style="width: 1.9979681679648%"></div>
<pre>

  Lemma path_functor'_sig_fst F G HO HM
  : ap object_of (@path_functor'_sig F G (HO; HM)) = HO.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 71
Time: 0.35s">
<div class="time" style="width: 11.852353538774%"></div>
<pre>
    destruct F, G; simpl in *.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 72
Time: 1.293s">
<div class="time" style="width: 43.785980358957%"></div>
<pre>
    path_induction_hammer.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 73
Time: 0.624s">
<div class="time" style="width: 21.131053166272%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 74
Time: 0.031s">
<div class="time" style="width: 1.0497798848629%"></div>
<pre>

  Lemma path_functor'_sig_idpath F
  : @path_functor'_sig F F (idpath; idpath) = idpath.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 78
Time: 0.086s">
<div class="time" style="width: 2.9122925838131%"></div>
<pre>
    destruct F; simpl in *.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 79
Time: 0.2s">
<div class="time" style="width: 6.7727734507281%"></div>
<pre>
    rewrite !(contr idpath).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 80
Time: 0.013s">
<div class="time" style="width: 0.44023027429732%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 81
Time: 0.178s">
<div class="time" style="width: 6.027768371148%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 82
Time: 0.098s">
<div class="time" style="width: 3.3186589908568%"></div>
<pre>

  Definition path_functor'_sig_inv (F G : Functor C D) : F = G -&gt; path_functor'_T F G
    := fun H'
       =&gt; (ap object_of H';
           (transport_compose _ _ _ _) ^ @ apD (@morphism_of _ _) H')%path.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 87
Time: 0.024s">
<div class="time" style="width: 0.81273281408737%"></div>
<pre>

  Lemma path_functor' (F G : Functor C D)
  : forall HO : object_of F = object_of G,
      transport (fun GO =&gt; forall s d, morphism C s d -&gt; morphism D (GO s) (GO d)) HO (morphism_of F) = morphism_of G
      -&gt; F = G.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 92
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 93
Time: 0.011s">
<div class="time" style="width: 0.37250253979004%"></div>
<pre>
    intros.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 94
Time: 0.021s">
<div class="time" style="width: 0.71114121232645%"></div>
<pre>
    apply path_functor'_sig.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 95
Time: 0.033s">
<div class="time" style="width: 1.1175076193701%"></div>
<pre>
    esplit; eassumption.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 96
Time: 0.078s">
<div class="time" style="width: 2.6413816457839%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 97
Time: 0.024s">
<div class="time" style="width: 0.81273281408737%"></div>
<pre>

  Lemma path_functor (F G : Functor C D)
  : forall HO : object_of F == object_of G,
      (forall s d m,
         transport (fun GO =&gt; forall s d, morphism C s d -&gt; morphism D (GO s) (GO d))
                   (path_forall _ _ HO)
                   (morphism_of F)
                   s d m
         = morphism_of G m)
      -&gt; F = G.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 107
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 108
Time: 0.012s">
<div class="time" style="width: 0.40636640704368%"></div>
<pre>
    intros.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 109
Time: 0.027s">
<div class="time" style="width: 0.91432441584829%"></div>
<pre>
    eapply (path_functor' F G (path_forall _ _ HO)).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 110
Time: 0.123s">
<div class="time" style="width: 4.1652556721978%"></div>
<pre>
    repeat (apply path_forall; intro); apply_hyp.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 111
Time: 0.106s">
<div class="time" style="width: 3.5895699288859%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 112
Time: 0.032s">
<div class="time" style="width: 1.0836437521165%"></div>
<pre>

  Lemma equiv_path_functor'_sig (F G : Functor C D)
  : path_functor'_T F G &lt;~&gt; F = G.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 116
Time: 0.128s">
<div class="time" style="width: 4.334575008466%"></div>
<pre>
    apply (equiv_adjointify (@path_functor'_sig F G)
                            (@path_functor'_sig_inv F G)).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Paths.v
Line: 119
Time: 0.001s">
<div class="time" style="width: 0.03386386725364%"></div>
<pre> hnf.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 119
Time: 0.051s">
<div class="time" style="width: 1.7270572299357%"></div>
<pre>
      intros [].</pre>
</div>
<div class="code" title="File: Paths.v
Line: 120
Time: 0.071s">
<div class="time" style="width: 2.4043345750085%"></div>
<pre>
      apply path_functor'_sig_idpath.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 121
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Paths.v
Line: 122
Time: 0.001s">
<div class="time" style="width: 0.03386386725364%"></div>
<pre> hnf.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 122
Time: 0.193s">
<div class="time" style="width: 6.5357263799526%"></div>
<pre>
      intros [? ?].</pre>
</div>
<div class="code" title="File: Paths.v
Line: 123
Time: 0.118s">
<div class="time" style="width: 3.9959363359296%"></div>
<pre>
      apply path_sigma_uncurried.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 124
Time: 0.975s">
<div class="time" style="width: 33.017270572299%"></div>
<pre>
      exists (path_functor'_sig_fst _ _ _).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 125
Time: 2.953s">
<div class="time" style="width: 100%"></div>
<pre>
      exact (center _).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 126
Time: 1.026s">
<div class="time" style="width: 34.744327802235%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 127
Time: 0.005s">
<div class="time" style="width: 0.1693193362682%"></div>
<pre>

  Global Instance trunc_functor `{IsTrunc n D} `{forall s d, IsTrunc n (morphism D s d)}
  : IsTrunc n (Functor C D).</pre>
</div>
<div class="code" title="File: Paths.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 131
Time: 0.009s">
<div class="time" style="width: 0.30477480528276%"></div>
<pre>
    eapply trunc_equiv'; [ exact equiv_sig_functor | ].</pre>
</div>
<div class="code" title="File: Paths.v
Line: 132
Time: 1.116s">
<div class="time" style="width: 37.792075855063%"></div>
<pre>
    induction n;
    simpl; intros;
    typeclasses eauto.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 135
Time: 0.753s">
<div class="time" style="width: 25.499492041991%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 136
Time: 0.172s">
<div class="time" style="width: 5.8245851676261%"></div>
<pre>
End path_functor.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Ltac path_functor :=
  repeat match goal with
           | _ =&gt; intro
           | _ =&gt; reflexivity
           | _ =&gt; apply path_functor'_sig; simpl
           | _ =&gt; (exists idpath)
         end.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 145
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Arguments path_functor'_sig : simpl never.</pre>
</div>
<div class="code" title="File: Paths.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

