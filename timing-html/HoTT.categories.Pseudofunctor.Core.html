<html>
<head>
<title>Core.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Core.v</h1>

<div class="code" title="File: Core.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * Pseudofunctors *)</pre>
</div>
<div class="code" title="File: Core.v
Line: 1
Time: 0.01s">
<div class="time" style="width: 0.058312438043035%"></div>
<pre>Require Import Category.Core Functor.Core NaturalTransformation.Core.</pre>
</div>
<div class="code" title="File: Core.v
Line: 1
Time: 0.055s">
<div class="time" style="width: 0.32071840923669%"></div>
<pre>
Require Import FunctorCategory.Core.</pre>
</div>
<div class="code" title="File: Core.v
Line: 2
Time: 0.021s">
<div class="time" style="width: 0.12245611989037%"></div>
<pre>
Require Import Category.Morphisms FunctorCategory.Morphisms.</pre>
</div>
<div class="code" title="File: Core.v
Line: 3
Time: 0.001s">
<div class="time" style="width: 0.0058312438043035%"></div>
<pre>
Require Import Functor.Composition.Core Functor.Identity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 4
Time: 0.001s">
<div class="time" style="width: 0.0058312438043035%"></div>
<pre>
Require Import NaturalTransformation.Composition.Core NaturalTransformation.Composition.Laws.</pre>
</div>
<div class="code" title="File: Core.v
Line: 5
Time: 0.053s">
<div class="time" style="width: 0.30905592162808%"></div>
<pre>
Require Import NaturalTransformation.Isomorphisms.</pre>
</div>
<div class="code" title="File: Core.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import NaturalTransformation.Paths.</pre>
</div>
<div class="code" title="File: Core.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Require Import FunctorCategory.Core.</pre>
</div>
<div class="code" title="File: Core.v
Line: 8
Time: 0.001s">
<div class="time" style="width: 0.0058312438043035%"></div>
<pre>
Require Import HoTT.Tactics.</pre>
</div>
<div class="code" title="File: Core.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: Core.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: Core.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: Core.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: Core.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope morphism_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section pseudofunctor.</pre>
</div>
<div class="code" title="File: Core.v
Line: 18
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Local Open Scope natural_transformation_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 19
Time: 0.001s">
<div class="time" style="width: 0.0058312438043035%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Variable C : PreCategory.</pre>
</div>
<div class="code" title="File: Core.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** Quoting from nCatLab (http://ncatlab.org/nlab/show/pseudofunctor):

      Given bicategories [C] and [D], a pseudofunctor (or weak 2-functor,
      or just functor) [P : C → D] consists of:

      - for each object [x] of [C], an object [P_x] of [D];

      - for each hom-category [C(x,y)] in [C], a functor [P_{x,y} :
        C(x,y) → D(P_x, P_y)];

      - for each object [x] of [C], an invertible 2-morphism (2-cell)
        [P_{id_x} : id_{P_x} ⇒ P_{x,x}(id_x)];

      - for each triple [x],[y],[z] of [C]-objects, a isomorphism
        (natural in [f : x → y] and [g : y → z]) [P_{x,y,z}(f,g) :
        P_{x,y}(f);P_{y,z}(g) ⇒ P_{x,z}(f;g)];

      - for each hom-category [C(x,y)],
&lt;&lt;
                                    id_{Pₓ} ; P_{x, y}(f)
                                      //              \\
                                    //                  \\
        P_{idₓ} ; id_{P_{x,y}(f)} //                      \\  λ_{P_{x,y}(f)}
                                //                          \\
                               ⇙                              ⇘
              Pₓ,ₓ(idₓ) ; P_{x,y}(f)                       P_{x,y}(f)
                               \\                             ⇗
                                 \\                         //
                P_{x,x,y}(idₓ, f)  \\                     // P_{x,y}(λ_f)
                                     \\                 //
                                       ⇘              //
                                        P_{x,y}(idₓ ; f)
&gt;&gt;

        and

&lt;&lt;
                                    P_{x, y}(f) ; id_{P_y}
                                      //              \\
                                    //                  \\
       id_{P_{x,y}(f)} ; P_{id_y} //                      \\  ρ_{P_{x,y}(f)}
                                //                          \\
                               ⇙                              ⇘
              P_{x,y}(f) ; P_{y,y}(id_y)                   P_{x,y}(f)
                               \\                             ⇗
                                 \\                         //
                P_{x,y,y}(f, id_y) \\                     // P_{x,y}(ρ_f)
                                     \\                 //
                                       ⇘              //
                                       P_{x,y}(f ; id_y)
&gt;&gt;
        commute; and

      - for each quadruple [w],[x],[y],[z] of [C]-objects,
&lt;&lt;
                                                  α_{P_{w,x}(f),P_{x,y}(g),P_{y,z}(h)}
        (P_{w,x}(f) ; P_{x,y}(g)) ; P_{y,z}(h) ========================================⇒ P_{w,x}(f) ; (P_{x,y}(g) ; P_{y,z}(h))
                                         ∥                                                   ∥
                                         ∥                                                   ∥
        P_{w,x,y}(f,g) ; id_{P_{y,z}(h)} ∥                                                   ∥ id_{P_{w,x}(f)} ; P_{x,y,z}(g, h)
                                         ∥                                                   ∥
                                         ⇓                                                   ⇓
                   P_{w,y}(f ; g) ; P_{y,z}(h)                                           P_{w,x}(f) ; P_{x,z}(g ; h)
                                         ∥                                                   ∥
                                         ∥                                                   ∥
                     P_{w,y,z}(f ; g, h) ∥                                                   ∥ P_{w,x,z}(f, g ; h)
                                         ∥                                                   ∥
                                         ⇓                                                   ⇓
                          P_{w,z}((f ; g) ; h) ========================================⇒ P_{w,z}(f ; (g ; h))
                                                          P_{w,z}(α_{f,g,h})
&gt;&gt;
        commutes.
*)

  (* To obtain the [p_composition_of_coherent] type, I ran
&lt;&lt;
  Unset Implicit Arguments.
  Variable F : Pseudofunctor.
  Goal forall (w x y z : C) (f : morphism C w x) (g : morphism C x y) (h : morphism C y z), Type.
  Proof.
    intros.
    pose ((idtoiso (_ -&gt; _) (ap (p_morphism_of F w z) (associativity C _ _ _ _ f g h))) : morphism _ _ _).
    pose ((p_composition_of F w y z h (g ∘ f)) : NaturalTransformation _ _).
    pose (p_morphism_of F y z h ∘ p_composition_of F w x y g f).

    pose (associator_1 (p_morphism_of F y z h) (p_morphism_of F x y g) (p_morphism_of F w x f)).
    pose (p_composition_of F x y z h g ∘ p_morphism_of F w x f).
    pose ((p_composition_of F w x z (h ∘ g) f) : NaturalTransformation _ _).
    simpl in *.
    repeat match goal with
             | [ H : _, H' : _ |- _ ] =&gt; unique_pose_with_body (NTComposeT H H'); subst H H'
           end.
    match goal with
      | [ H := _, H' := _ |- _ ] =&gt; assert (H = H'); subst H H'
    end.
&gt;&gt;

&lt;&lt;
  Unset Implicit Arguments.
  Variable F : Pseudofunctor.
  Goal forall (x y : C) (f : morphism C x y), Type.
  Proof.
    intros.
    pose (p_identity_of F y ∘ p_morphism_of F x y f).
    pose (p_composition_of F x y y (Identity y) f : NaturalTransformation _ _).
    pose (idtoiso (_ -&gt; _) (ap (p_morphism_of F x y) (left_identity _ _ _ f)) : morphism _ _ _).
    pose (left_identity_natural_transformation_2 (p_morphism_of F x y f)).
    simpl in *.
    repeat match goal with
             | [ H : _, H' : _ |- _ ] =&gt; unique_pose_with_body (NTComposeT H H'); subst H H'
           end.
    match goal with
      | [ H := _, H' := _ |- _ ] =&gt; assert (H = H'); subst H H'
    end.
&gt;&gt;

&lt;&lt;
  Unset Implicit Arguments.
  Variable F : Pseudofunctor.
  Goal forall (x y : C) (f : morphism C x y), Type.
  Proof.
    intros.
    pose (p_morphism_of F x y f ∘ p_identity_of F x).
    pose (p_composition_of F x x y f (Identity x) : NaturalTransformation _ _).
    pose (idtoiso (_ -&gt; _) (ap (p_morphism_of F x y) (right_identity _ _ _ f)) : morphism _ _ _).
    pose (right_identity_natural_transformation_2 (p_morphism_of F x y f)).
    simpl in *.
    repeat match goal with
             | [ H : _, H' : _ |- _ ] =&gt; unique_pose_with_body (NTComposeT H H'); subst H H'
           end.
    match goal with
      | [ H := _, H' := _ |- _ ] =&gt; assert (H = H'); subst H H'
    end.
&gt;&gt;
 *)

 </pre>
</div>
<div class="code" title="File: Core.v
Line: 160
Time: 8.512s">
<div class="time" style="width: 49.635547262231%"></div>
<pre>Record Pseudofunctor :=
    {
      p_object_of :&gt; C -&gt; PreCategory;
      p_morphism_of : forall s d, morphism C s d
                                  -&gt; Functor (p_object_of s) (p_object_of d);
      p_composition_of : forall s d d'
                                (m1 : morphism C d d') (m2 : morphism C s d),
                           (p_morphism_of _ _ (m1 o m2))
                             &lt;~=~&gt; (p_morphism_of _ _ m1 o p_morphism_of _ _ m2)%functor;
      p_identity_of : forall x, p_morphism_of x x 1 &lt;~=~&gt; 1%functor;
      p_composition_of_coherent
      : forall w x y z
               (f : morphism C w x) (g : morphism C x y) (h : morphism C y z),
          ((associator_1 (p_morphism_of y z h) (p_morphism_of x y g) (p_morphism_of w x f))
             o ((p_composition_of x y z h g oR p_morphism_of w x f)
                  o (p_composition_of w x z (h o g) f)))
          = ((p_morphism_of y z h oL p_composition_of w x y g f)
               o ((p_composition_of w y z h (g o f))
                    o (Category.Morphisms.idtoiso (_ -&gt; _) (ap (p_morphism_of w z) (Category.Core.associativity C w x y z f g h)) : morphism _ _ _)));
      p_left_identity_of_coherent
      : forall x y (f : morphism C x y),
          ((p_identity_of y oR p_morphism_of x y f)
             o p_composition_of x y y 1 f)
          = ((left_identity_natural_transformation_2 (p_morphism_of x y f))
               o (Category.Morphisms.idtoiso (_ -&gt; _) (ap (p_morphism_of x y) (Category.Core.left_identity C x y f)) : morphism _ _ _));
      p_right_identity_of_coherent
      : forall x y (f : morphism C x y),
          ((p_morphism_of x y f oL p_identity_of x)
             o p_composition_of x x y f 1)
          = ((right_identity_natural_transformation_2 (p_morphism_of x y f))
               o (Category.Morphisms.idtoiso (_ -&gt; _) (ap (p_morphism_of x y) (Category.Core.right_identity C x y f)) : morphism _ _ _))
    }.</pre>
</div>
<div class="code" title="File: Core.v
Line: 191
Time: 0.641s">
<div class="time" style="width: 3.7378272785585%"></div>
<pre>
End pseudofunctor.</pre>
</div>
<div class="code" title="File: Core.v
Line: 192
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Delimit Scope pseudofunctor_scope with pseudofunctor.</pre>
</div>
<div class="code" title="File: Core.v
Line: 194
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Bind Scope pseudofunctor_scope with Pseudofunctor.</pre>
</div>
<div class="code" title="File: Core.v
Line: 195
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Create HintDb pseudofunctor discriminated.</pre>
</div>
<div class="code" title="File: Core.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments p_object_of {_} {C%category} F%pseudofunctor c%object : rename, simpl nomatch.</pre>
</div>
<div class="code" title="File: Core.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Arguments p_morphism_of {_} [C%category] F%pseudofunctor [s d]%object m%morphism : rename, simpl nomatch.</pre>
</div>
<div class="code" title="File: Core.v
Line: 200
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(*Notation "F ₀ x" := (p_object_of F x) : object_scope.
Notation "F ₁ m" := (p_morphism_of F m) : morphism_scope.*)

</pre>
</div>
<div class="code" title="File: Core.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section lemmas.</pre>
</div>
<div class="code" title="File: Core.v
Line: 204
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Local Open Scope natural_transformation_scope.</pre>
</div>
<div class="code" title="File: Core.v
Line: 205
Time: 0.003s">
<div class="time" style="width: 0.01749373141291%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 206
Time: 0.001s">
<div class="time" style="width: 0.0058312438043035%"></div>
<pre>

  Variable C : PreCategory.</pre>
</div>
<div class="code" title="File: Core.v
Line: 208
Time: 0.08s">
<div class="time" style="width: 0.46649950434428%"></div>
<pre>
  Variable F : Pseudofunctor C.</pre>
</div>
<div class="code" title="File: Core.v
Line: 209
Time: 0.786s">
<div class="time" style="width: 4.5833576301825%"></div>
<pre>

  Lemma p_composition_of_coherent_for_rewrite_helper w x y z
        (f : morphism C w x) (g : morphism C x y) (h : morphism C y z)
        (p p0 p1 p2 : PreCategory) (f0 : morphism C w z -&gt; Functor p2 p1)
        (f1 : Functor p0 p1) (f2 : Functor p2 p) (f3 : Functor p p0)
        (f4 : Functor p2 p0) `(@IsIsomorphism (_ -&gt; _) f4 (f3 o f2)%functor n)
        `(@IsIsomorphism (_ -&gt; _) (f0 (h o (g o f))%morphism) (f1 o f4)%functor n0)
  : (Category.Morphisms.idtoiso (p2 -&gt; p1) (ap f0 (Category.Core.associativity C w x y z f g h)) : morphism _ _ _)
    = (n0^-1
         o ((f1 oL n^-1)
              o ((f1 oL n)
                   o (n0
                        o (Category.Morphisms.idtoiso (p2 -&gt; p1) (ap f0 (Category.Core.associativity C w x y z f g h)) : morphism _ _ _))))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 222
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 223
Time: 0.06s">
<div class="time" style="width: 0.34987462825821%"></div>
<pre>
    simpl in *.</pre>
</div>
<div class="code" title="File: Core.v
Line: 224
Time: 1.815s">
<div class="time" style="width: 10.583707504811%"></div>
<pre>
    let C := match goal with |- @paths (@NaturalTransformation ?C ?D ?F ?G) _ _ =&gt; constr:(C -&gt; D)%category end in
    apply (@iso_moveL_Vp C);
      apply (@iso_moveL_Mp C _ _ _ _ _ _ (iso_whisker_l _ _ _ _ _ _ _)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 227
Time: 0.693s">
<div class="time" style="width: 4.0410519563823%"></div>
<pre>
    path_natural_transformation.</pre>
</div>
<div class="code" title="File: Core.v
Line: 228
Time: 0.371s">
<div class="time" style="width: 2.1633914513966%"></div>
<pre>
    reflexivity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 229
Time: 2.6s">
<div class="time" style="width: 15.161233891189%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Core.v
Line: 230
Time: 0.01s">
<div class="time" style="width: 0.058312438043035%"></div>
<pre>

  Arguments p_composition_of_coherent_for_rewrite_helper {_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _}.</pre>
</div>
<div class="code" title="File: Core.v
Line: 232
Time: 2.336s">
<div class="time" style="width: 13.621785526853%"></div>
<pre>

  Lemma p_composition_of_coherent_for_rewrite w x y z
        (f : morphism C w x) (g : morphism C x y) (h : morphism C y z)
  : (Category.Morphisms.idtoiso (_ -&gt; _) (ap (@p_morphism_of _ _ F w z) (Category.Core.associativity C w x y z f g h)) : morphism _ _ _)
    = (((p_composition_of F w y z h (g o f))^-1)
         o ((p_morphism_of F h oL (p_composition_of F w x y g f)^-1)
              o ((associator_1 (p_morphism_of F h) (p_morphism_of F g) (p_morphism_of F f))
                   o ((p_composition_of F x y z h g oR p_morphism_of F f)
                        o p_composition_of F w x z (h o g) f)))).</pre>
</div>
<div class="code" title="File: Core.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 242
Time: 5.369s">
<div class="time" style="width: 31.307947985305%"></div>
<pre>
    simpl rewrite (@p_composition_of_coherent _ C F w x y z f g h).</pre>
</div>
<div class="code" title="File: Core.v
Line: 243
Time: 6.528s">
<div class="time" style="width: 38.066359554493%"></div>
<pre>
    exact p_composition_of_coherent_for_rewrite_helper.</pre>
</div>
<div class="code" title="File: Core.v
Line: 244
Time: 12.646s">
<div class="time" style="width: 73.741909149222%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Core.v
Line: 245
Time: 0.718s">
<div class="time" style="width: 4.1868330514899%"></div>
<pre>

  Lemma p_left_identity_of_coherent_for_rewrite x y (f : morphism C x y)
  : (Category.Morphisms.idtoiso (_ -&gt; _) (ap (@p_morphism_of _ _ F x y) (Category.Core.left_identity C x y f)) : morphism _ _ _)
    = ((left_identity_natural_transformation_1 (p_morphism_of F f))
         o ((p_identity_of F y oR p_morphism_of F f)
              o p_composition_of F x y y 1 f)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 252
Time: 2.039s">
<div class="time" style="width: 11.889906116975%"></div>
<pre>
    simpl rewrite (@p_left_identity_of_coherent _ C F x y f).</pre>
</div>
<div class="code" title="File: Core.v
Line: 253
Time: 0.949s">
<div class="time" style="width: 5.533850370284%"></div>
<pre>
    path_natural_transformation.</pre>
</div>
<div class="code" title="File: Core.v
Line: 254
Time: 1.321s">
<div class="time" style="width: 7.7030730654849%"></div>
<pre>
    apply symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 255
Time: 4.87s">
<div class="time" style="width: 28.398157326958%"></div>
<pre>
    etransitivity; apply Category.Core.left_identity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 256
Time: 12.028s">
<div class="time" style="width: 70.138200478162%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Core.v
Line: 257
Time: 0.722s">
<div class="time" style="width: 4.2101580267071%"></div>
<pre>

  Lemma p_right_identity_of_coherent_for_rewrite x y (f : morphism C x y)
  : (Category.Morphisms.idtoiso (_ -&gt; _) (ap (@p_morphism_of _ _ F x y) (Category.Core.right_identity C x y f)) : morphism _ _ _)
    = ((right_identity_natural_transformation_1 (p_morphism_of F f))
         o ((p_morphism_of F f oL p_identity_of F x)
              o p_composition_of F x x y f 1)).</pre>
</div>
<div class="code" title="File: Core.v
Line: 263
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Core.v
Line: 264
Time: 2.329s">
<div class="time" style="width: 13.580966820223%"></div>
<pre>
    simpl rewrite (@p_right_identity_of_coherent _ C F x y f).</pre>
</div>
<div class="code" title="File: Core.v
Line: 265
Time: 1.119s">
<div class="time" style="width: 6.5251618170156%"></div>
<pre>
    path_natural_transformation.</pre>
</div>
<div class="code" title="File: Core.v
Line: 266
Time: 1.667s">
<div class="time" style="width: 9.7206834217739%"></div>
<pre>
    apply symmetry.</pre>
</div>
<div class="code" title="File: Core.v
Line: 267
Time: 5.835s">
<div class="time" style="width: 34.025307598111%"></div>
<pre>
    etransitivity; apply Category.Core.left_identity.</pre>
</div>
<div class="code" title="File: Core.v
Line: 268
Time: 17.149s">
<div class="time" style="width: 100%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Core.v
Line: 269
Time: 0.138s">
<div class="time" style="width: 0.80471164499388%"></div>
<pre>
End lemmas.</pre>
</div>
<div class="code" title="File: Core.v
Line: 271
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

