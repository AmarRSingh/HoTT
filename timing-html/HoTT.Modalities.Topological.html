<html>
<head>
<title>Topological.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Topological.v</h1>

<div class="code" title="File: Topological.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)</pre>
</div>
<div class="code" title="File: Topological.v
Line: 1
Time: 0.05s">
<div class="time" style="width: 10.615711252654%"></div>
<pre>Require Import HoTT.Basics HoTT.Types.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 1
Time: 0.009s">
<div class="time" style="width: 1.9108280254777%"></div>
<pre>
Require Import Extensions.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 2
Time: 0.096s">
<div class="time" style="width: 20.382165605096%"></div>
<pre>
Require Import Modality Accessible Lex Nullification.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 3
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(** * Topological localizations *)

(** A topological localization -- or, as we will say, a topological nullification -- is a nullification at a family of hprops, or more generally an accessible modality whose generators of accessibility are all hprops.  This is not quite the same as Lurie's definition: in Higher Topos Theory, a topological localization is an accessible *left exact* localization at a pullback-stable class generated by a set of monomorphisms.  "Pullback-stable class generated by" is roughly incorporated into our internal notion of accessibility, so the main new difference here is that when the generation is internal in this way, the localization at a family of hprops is *automatically* left exact. *)

</pre>
</div>
<div class="code" title="File: Topological.v
Line: 11
Time: 0.02s">
<div class="time" style="width: 4.2462845010616%"></div>
<pre>Module Topological_Modalities_Theory
       (Os : Modalities) (Acc : Accessible_Modalities Os).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 12
Time: 0.399s">
<div class="time" style="width: 84.713375796178%"></div>
<pre>

  Module Export Acc_Lex_Theory := Accessible_Lex_Modalities_Theory Os Acc.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  Notation Topological O := (forall i, IsHProp (acc_gen O i)).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 16
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Topological modalities are lex *)

  (** We prove left-exactness by proving that the universe of modal types is modal.  Of course, this requires univalence. *)

 </pre>
</div>
<div class="code" title="File: Topological.v
Line: 22
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Global Instance lex_topological `{Univalence}
         (O : Modality) `{Topological O}
  : Lex O.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 24
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 25
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply lex_inO_typeO.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 26
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    refine (snd (inO_iff_isnull O _) _); intros i.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 27
Time: 0.471s">
<div class="time" style="width: 100%"></div>
<pre>
    refine (equiv_inverse (equiv_ooextendable_isequiv _ _) _).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 28
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    simple refine (isequiv_adjointify _ _ _ _); simpl.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Topological.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros B _.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 30
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      refine ((forall a, B a) ; _).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 31
Time: 0.055s">
<div class="time" style="width: 11.677282377919%"></div>
<pre>
      exact _.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Topological.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros B.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 33
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>
      apply path_arrow; intros a.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 34
Time: 0.002s">
<div class="time" style="width: 0.42462845010616%"></div>
<pre>
      apply path_TypeO, path_universe_uncurried.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold composeD; simpl.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      simple refine (equiv_adjointify _ _ _ _).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 37
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Topological.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros f.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> exact (f a).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Topological.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b a'.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre> exact (transport B (path_ishprop a a') b).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 39
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Topological.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 40
Time: 0.01s">
<div class="time" style="width: 2.1231422505308%"></div>
<pre>
        refine (transport2 B (path_contr _ 1) b).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: Topological.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros f.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 42
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre> apply path_forall; intros a'.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 42
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        exact (apD f _).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 43
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: Topological.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros B.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 44
Time: 0.003s">
<div class="time" style="width: 0.63694267515924%"></div>
<pre>
      apply path_arrow; intros [].</pre>
</div>
<div class="code" title="File: Topological.v
Line: 45
Time: 0.002s">
<div class="time" style="width: 0.42462845010616%"></div>
<pre>
      apply path_TypeO, path_universe_uncurried.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      unfold composeD; simpl.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 47
Time: 0.002s">
<div class="time" style="width: 0.42462845010616%"></div>
<pre>
      pose (e := isequiv_ooextendable _ _
                                      (fst (inO_iff_isnull O (B tt)) (inO_TypeO (B tt)) i)).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 49
Time: 0.009s">
<div class="time" style="width: 1.9108280254777%"></div>
<pre>
      unfold composeD in e; simpl in e.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 50
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>
      refine (_ oE (BuildEquiv _ _ _ e)^-1).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 51
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>
      exact (equiv_contr_forall _).</pre>
</div>
<div class="code" title="File: Topological.v
Line: 52
Time: 0.022s">
<div class="time" style="width: 4.6709129511677%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End Topological_Modalities_Theory.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** In particular, a nullification at a family of hprops is topological and therefore lex. *)

</pre>
</div>
<div class="code" title="File: Topological.v
Line: 58
Time: 0.369s">
<div class="time" style="width: 78.343949044586%"></div>
<pre>Module Import Topological_Nullification_Theory :=
  Topological_Modalities_Theory
    Nullification_Modalities
    Accessible_Nullification.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** It isn't necessary to declare these as global instances, since typeclass search can find them automatically.  But we want to state them explicitly here for exposition, so we make them local instances. *)</pre>
</div>
<div class="code" title="File: Topological.v
Line: 63
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>Local Instance topological_nullification
      (O : Nullification_Modality) `{forall i, IsHProp (unNul O i)}
: Topological O.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 66
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exact _.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 68
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Note the hypothesis of [Univalence] required for this one.  It's unclear whether this is necessary or not in general; in one special case (open modalities) funext suffices.  But it's plausible that it would be necessary in general, because lex-ness of nullification is a statement about the path-spaces of a HIT, and characterizing those in any way usually requires some amount of univalence. *)</pre>
</div>
<div class="code" title="File: Topological.v
Line: 70
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Local Instance lex_nullification `{Univalence}
      (O : Nullification_Modality) `{forall i, IsHProp (unNul O i)}
: Lex O.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 73
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>
  exact _.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 74
Time: 0.001s">
<div class="time" style="width: 0.21231422505308%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Topological.v
Line: 76
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

