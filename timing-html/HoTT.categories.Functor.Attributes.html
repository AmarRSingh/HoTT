<html>
<head>
<title>Attributes.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Attributes.v</h1>

<div class="code" title="File: Attributes.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(** * Attributes of functors (full, faithful, split essentially surjective) *)</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 1
Time: 0.084s">
<div class="time" style="width: 3.3070866141732%"></div>
<pre>Require Import Category.Core Functor.Core HomFunctor Category.Morphisms Category.Dual Functor.Dual Category.Prod Functor.Prod NaturalTransformation.Core SetCategory.Core Functor.Composition.Core.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 1
Time: 0.018s">
<div class="time" style="width: 0.70866141732283%"></div>
<pre>
Require Import hit.epi types.Universe HSet hit.iso Overture hit.minus1Trunc.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Set Universe Polymorphism.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Implicit Arguments.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Generalizable All Variables.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Set Asymmetric Patterns.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Local Open Scope category_scope.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 9
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section full_faithful.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 11
Time: 0.001s">
<div class="time" style="width: 0.039370078740157%"></div>
<pre>
  Context `{Funext}.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 12
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variable C : PreCategory.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 13
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variable D : PreCategory.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 14
Time: 0.001s">
<div class="time" style="width: 0.039370078740157%"></div>
<pre>
  Variable F : Functor C D.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 15
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Natural transformation [hom_C(─, ─) → hom_D(Fᵒᵖ(─), F(─))] *)
  (** TODO(JasonGross): Come up with a better name and location for this. *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 19
Time: 0.044s">
<div class="time" style="width: 1.7322834645669%"></div>
<pre>Definition induced_hom_natural_transformation
  : NaturalTransformation (hom_functor C) (hom_functor D o (F^op, F)).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 20
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 21
Time: 0.78s">
<div class="time" style="width: 30.708661417323%"></div>
<pre>
    refine (Build_NaturalTransformation
              (hom_functor C)
              (hom_functor D o (F^op, F))
              (fun sd : object (C^op * C) =&gt;
                 morphism_of F (s := _) (d := _))
              _
           ).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 28
Time: 2.54s">
<div class="time" style="width: 100%"></div>
<pre>
    abstract (
        repeat (intros [] || intro);
        simpl in *;
          repeat (apply path_forall; intro);
        unfold compose, Overture.compose;
        simpl;
        rewrite !composition_of;
        reflexivity
      ).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 37
Time: 0.025s">
<div class="time" style="width: 0.98425196850394%"></div>
<pre>
  Defined.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Full *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 41
Time: 0.174s">
<div class="time" style="width: 6.8503937007874%"></div>
<pre>Class IsFull
    := is_full
       : forall x y : C,
           IsEpimorphism (induced_hom_natural_transformation (x, y)).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 44
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (** ** Faithful *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 46
Time: 0.169s">
<div class="time" style="width: 6.6535433070866%"></div>
<pre>Class IsFaithful
    := is_faithful
       : forall x y : C,
           IsMonomorphism (induced_hom_natural_transformation (x, y)).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 49
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Fully Faithful *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 52
Time: 0.082s">
<div class="time" style="width: 3.2283464566929%"></div>
<pre>Class IsFullyFaithful
    := is_fully_faithful
       : forall x y : C,
           IsIsomorphism (induced_hom_natural_transformation (x, y)).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 55
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Fully Faithful → Full *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 58
Time: 0.005s">
<div class="time" style="width: 0.19685039370079%"></div>
<pre>Global Instance isfull_isfullyfaithful `{IsFullyFaithful}
  : IsFull.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 59
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 60
Time: 0.001s">
<div class="time" style="width: 0.039370078740157%"></div>
<pre>
    intros ? ?; hnf in * |- .</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 61
Time: 0.202s">
<div class="time" style="width: 7.9527559055118%"></div>
<pre>
    typeclasses eauto.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 62
Time: 0.071s">
<div class="time" style="width: 2.7952755905512%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Fully Faithful → Faithful *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 66
Time: 0.003s">
<div class="time" style="width: 0.11811023622047%"></div>
<pre>Global Instance isfaithful_isfullyfaithful `{IsFullyFaithful}
  : IsFaithful.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 67
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 68
Time: 0.001s">
<div class="time" style="width: 0.039370078740157%"></div>
<pre>
    intros ? ?; hnf in * |- .</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 69
Time: 0.166s">
<div class="time" style="width: 6.5354330708661%"></div>
<pre>
    typeclasses eauto.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 70
Time: 0.082s">
<div class="time" style="width: 3.2283464566929%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 71
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** ** Full * Faithful → Fully Faithful *)
  (** We start with a helper method, which assumes that epi * mono → iso, and ten prove this assumption *)
 </pre>
</div>
<div class="code" title="File: Attributes.v
Line: 75
Time: 0.013s">
<div class="time" style="width: 0.51181102362205%"></div>
<pre>Lemma isfullyfaithful_isfull_isfaithful_helper `{IsFull} `{IsFaithful}
        (H' : forall x y (m : morphism set_cat x y),
                IsEpimorphism m
                -&gt; IsMonomorphism m
                -&gt; IsIsomorphism m)
  : IsFullyFaithful.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 81
Time: 0.001s">
<div class="time" style="width: 0.039370078740157%"></div>
<pre>
    intros ? ?; hnf in * |- .</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 82
Time: 0.219s">
<div class="time" style="width: 8.6220472440945%"></div>
<pre>
    apply H'; eauto.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 83
Time: 0.058s">
<div class="time" style="width: 2.2834645669291%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 84
Time: 0.413s">
<div class="time" style="width: 16.259842519685%"></div>
<pre>
End full_faithful.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 85
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section fully_faithful_helpers.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Context `{fs0 : Funext}.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variables x y : hSet.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Variable m : x -&gt; y.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 90
Time: 0.004s">
<div class="time" style="width: 0.15748031496063%"></div>
<pre>

  Lemma isisomorphism_isequiv_set_cat
        `{H' : IsEquiv _ _ m}
  : IsIsomorphism (m : morphism set_cat x y).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  Proof.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 95
Time: 0.191s">
<div class="time" style="width: 7.5196850393701%"></div>
<pre>
    exists (m^-1)%equiv;
    apply path_forall; intro;
    destruct H';
    simpl in *;
    eauto.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 100
Time: 0.037s">
<div class="time" style="width: 1.4566929133858%"></div>
<pre>
  Qed.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 101
Time: 0.151s">
<div class="time" style="width: 5.9448818897638%"></div>
<pre>

  Let isequiv_isepi_ismono_helper ua : isepi m -&gt; ismono m -&gt; IsEquiv m
    := @isequiv_isepi_ismono ua fs0 x y m.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 104
Time: 0.091s">
<div class="time" style="width: 3.5826771653543%"></div>
<pre>

  Definition isequiv_isepimorphism_ismonomorphism
        `{Univalence}
        (Hepi : IsEpimorphism (m : morphism set_cat x y))
        (Hmono : IsMonomorphism (m : morphism set_cat x y))
  : @IsEquiv _ _ m
    := @isequiv_isepi_ismono_helper _ Hepi Hmono.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 111
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

  (** TODO: Figure out why Universe inconsistencies don't respect delta expansion. *)
  (*Definition isequiv_isepimorphism_ismonomorphism'
        `{fs1 : Funext} `{Univalence}
        (Hepi : IsEpimorphism (m : morphism set_cat x y))
        (Hmono : IsMonomorphism (m : morphism set_cat x y))
  : @IsEquiv _ _ m
    := @isequiv_isepi_ismono _ fs0 fs1 x y m Hepi Hmono.*)</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 119
Time: 0.009s">
<div class="time" style="width: 0.35433070866142%"></div>
<pre>End fully_faithful_helpers.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 119
Time: 0.84s">
<div class="time" style="width: 33.070866141732%"></div>
<pre>

Global Instance isfullyfaithful_isfull_isfaithful
       `{Univalence} `{fs0 : Funext} `{fs1 : Funext}
       `{Hfull : @IsFull fs0 C D F}
       `{Hfaithful : @IsFaithful fs0 C D F}
: @IsFullyFaithful fs0 C D F
  := fun x y =&gt; @isisomorphism_isequiv_set_cat
                  fs0 _ _ _
                  (@isequiv_isepimorphism_ismonomorphism
                     fs1 _ _ _ _
                     (Hfull x y)
                     (Hfaithful x y)).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Split Essentially Surjective *)
(** Quoting the HoTT Book:

    We say a functor [F : A → B] is _split essentially surjective_ if
    for all [b : B] there exists an [a : A] such that [F a ≅ b]. *)

</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 138
Time: 0.024s">
<div class="time" style="width: 0.94488188976378%"></div>
<pre>Class IsSplitEssentiallySurjective A B (F : Functor A B)
  := is_split_essentially_surjective
     : forall b : B, exists a : A, F a &lt;~=~&gt; b.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Essentially Surjective *)
(** Quoting the HoTT Book:

    A functor [F : A → B] is _split essentially surjective_ if for all
    [b : B] there _merely_ exists an [a : A] such that [F a ≅ b]. *)</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 146
Time: 0.03s">
<div class="time" style="width: 1.1811023622047%"></div>
<pre>Class IsEssentiallySurjective A B (F : Functor A B)
  := is_essentially_surjective
     : forall b : B, hexists (fun a : A =&gt; F a &lt;~=~&gt; b).</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Weak Equivalence *)
(** Quoting the HoTT Book:

    We say [F] is a _weak equivalence_ if it is fully faithful and
    essentially surjective. *)</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 154
Time: 0.083s">
<div class="time" style="width: 3.2677165354331%"></div>
<pre>Class IsWeakEquivalence `{Funext} A B (F : Functor A B)
  := { is_fully_faithful__is_weak_equivalence :&gt; IsFullyFaithful F;
       is_essentially_surjective__is_weak_equivalence :&gt; IsEssentiallySurjective F }.</pre>
</div>
<div class="code" title="File: Attributes.v
Line: 157
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

