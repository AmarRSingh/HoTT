<html>
<head>
<title>Flattening.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for Flattening.v</h1>

<div class="code" title="File: Flattening.v
Line: 1
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>(* -*- mode: coq; mode: visual-line -*- *)

(** * The flattening lemma. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 4
Time: 0.015s">
<div class="time" style="width: 0.35344015080113%"></div>
<pre>Require Import Overture PathGroupoids Equivalences.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 4
Time: 0.033s">
<div class="time" style="width: 0.77756833176249%"></div>
<pre>
Require Import types.Paths types.Forall types.Sigma types.Arrow types.Universe.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 6
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Local Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 7
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>


(* First we define the general non-recursive HIT. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 11
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module Export BaseHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 11
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>

Local Inductive W (A B : Type) (f g : B -&gt; A) : Type :=
| cc : A -&gt; W A B f g.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 14
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments cc {A B f g} a.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 16
Time: 0.002s">
<div class="time" style="width: 0.047125353440151%"></div>
<pre>

Axiom pp : forall {A B f g} (b:B), @cc A B f g (f b) = cc (g b).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 18
Time: 0.008s">
<div class="time" style="width: 0.1885014137606%"></div>
<pre>

Definition W_rect {A B f g} (P : W A B f g -&gt; Type)
  (cc' : forall a, P (cc a))
  (pp' : forall b, (pp b) # (cc' (f b)) = cc' (g b))
  : forall w, P w
  := fun w =&gt; match w with cc a =&gt; cc' a end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 24
Time: 0.013s">
<div class="time" style="width: 0.30631479736098%"></div>
<pre>

Axiom W_rect_beta_pp
  : forall {A B f g} (P : W A B f g -&gt; Type) (cc' : forall a, P (cc a))
  (pp' : forall b, (pp b) # (cc' (f b)) = cc' (g b)) (b:B),
  apD (W_rect P cc' pp') (pp b) = pp' b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 29
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End BaseHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 31
Time: 0.009s">
<div class="time" style="width: 0.21206409048068%"></div>
<pre>

Definition W_rectnd {A B f g} (P : Type) (cc' : A -&gt; P)
  (pp' : forall b, cc' (f b) = cc' (g b))
  : W A B f g -&gt; P
  := W_rect (fun _ =&gt; P) cc' (fun b =&gt; transport_const _ _ @ pp' b).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 36
Time: 0.005s">
<div class="time" style="width: 0.11781338360038%"></div>
<pre>

Definition W_rectnd_beta_pp {A B f g} (P : Type) (cc' : A -&gt; P)
  (pp' : forall b:B, cc' (f b) = cc' (g b)) (b:B)
  : ap (W_rectnd P cc' pp') (pp b) = pp' b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 40
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 41
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  unfold W_rectnd.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 42
Time: 0.1s">
<div class="time" style="width: 2.3562676720075%"></div>
<pre>
  refine (cancelL (transport_const (pp b) _) _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 43
Time: 0.206s">
<div class="time" style="width: 4.8539114043355%"></div>
<pre>
  refine ((apD_const (@W_rect A B f g (fun _ =&gt; P) cc' _) (pp b))^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 44
Time: 0.018s">
<div class="time" style="width: 0.42412818096136%"></div>
<pre>
  refine (W_rect_beta_pp (fun _ =&gt; P) _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 45
Time: 0.087s">
<div class="time" style="width: 2.0499528746466%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(* Now we define the flattened HIT which will be equivalent to the total space of a fibration over [W]. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module Export FlattenedHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 51
Time: 0.002s">
<div class="time" style="width: 0.047125353440151%"></div>
<pre>

Local Inductive Wtil (A B : Type) (f g : B -&gt; A)
  (C : A -&gt; Type) (D : forall b, C (f b) &lt;~&gt; C (g b))
  : Type :=
| cct : forall a, C a -&gt; Wtil A B f g C D.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 56
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Arguments cct {A B f g C D} a c.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 58
Time: 0.005s">
<div class="time" style="width: 0.11781338360038%"></div>
<pre>

Axiom ppt : forall {A B f g C D} (b:B) (y:C (f b)),
  @cct A B f g C D (f b) y = cct (g b) (D b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 61
Time: 0.018s">
<div class="time" style="width: 0.42412818096136%"></div>
<pre>

Definition Wtil_rect {A B f g C D} (Q : Wtil A B f g C D -&gt; Type)
  (cct' : forall a x, Q (cct a x))
  (ppt' : forall b y, (ppt b y) # (cct' (f b) y) = cct' (g b) (D b y))
  : forall w, Q w
  := fun w =&gt; match w with cct a x =&gt; cct' a x end.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 67
Time: 0.029s">
<div class="time" style="width: 0.68331762488219%"></div>
<pre>

Axiom Wtil_rect_beta_ppt
  : forall {A B f g C D} (Q : Wtil A B f g C D -&gt; Type)
    (cct' : forall a x, Q (cct a x))
    (ppt' : forall b y, (ppt b y) # (cct' (f b) y) = cct' (g b) (D b y))
    (b:B) (y : C (f b)),
    apD (Wtil_rect Q cct' ppt') (ppt b y) = ppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End FlattenedHIT.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 76
Time: 0.017s">
<div class="time" style="width: 0.40056550424128%"></div>
<pre>

Definition Wtil_rectnd {A B f g C} {D : forall b, C (f b) &lt;~&gt; C (g b)}
  (Q : Type) (cct' : forall a (x : C a), Q)
  (ppt' : forall b (y : C (f b)), cct' (f b) y = cct' (g b) (D b y))
  : Wtil A B f g C D -&gt; Q
  := Wtil_rect (fun _ =&gt; Q) cct' (fun b y =&gt; transport_const _ _ @ ppt' b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 82
Time: 0.009s">
<div class="time" style="width: 0.21206409048068%"></div>
<pre>

Definition Wtil_rectnd_beta_ppt
  {A B f g C} {D : forall b, C (f b) &lt;~&gt; C (g b)}
  (Q : Type) (cct' : forall a (x : C a), Q)
  (ppt' : forall (b:B) (y : C (f b)), cct' (f b) y = cct' (g b) (D b y))
  (b:B) (y: C (f b))
  : ap (@Wtil_rectnd A B f g C D Q cct' ppt') (ppt b y) = ppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 90
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>
  unfold Wtil_rectnd.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 91
Time: 0.149s">
<div class="time" style="width: 3.5108388312912%"></div>
<pre>
  refine (cancelL (transport_const (ppt b y) _) _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 92
Time: 0.217s">
<div class="time" style="width: 5.1131008482564%"></div>
<pre>
  refine ((apD_const
    (@Wtil_rect A B f g C D (fun _ =&gt; Q) cct' _) (ppt b y))^ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 94
Time: 0.017s">
<div class="time" style="width: 0.40056550424128%"></div>
<pre>
  refine (Wtil_rect_beta_ppt (fun _ =&gt; Q) _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 95
Time: 0.118s">
<div class="time" style="width: 2.7803958529689%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 96
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(* Now we define the fibration over it that we will be considering the total space of. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Section AssumeAxioms.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context `{Funext} `{Univalence}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {A B : Type} {f g : B -&gt; A}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context {C : A -&gt; Type} {D : forall b, C (f b) &lt;~&gt; C (g b)}.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 105
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Let W' := W A B f g.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 107
Time: 0.005s">
<div class="time" style="width: 0.11781338360038%"></div>
<pre>

Let P : W' -&gt; Type
  := W_rectnd Type C (fun b =&gt; path_universe (D b)).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>



(* Now we give the total space the same structure as [Wtil]. *)

</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Let sWtil := { w:W' &amp; P w }.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 115
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>

Let scct (a:A) (x:C a) : sWtil := (existT P (cc a) x).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 117
Time: 0.023s">
<div class="time" style="width: 0.54194156456173%"></div>
<pre>

Let sppt (b:B) (y:C (f b)) : scct (f b) y = scct (g b) (D b y)
  := path_sigma' P (pp b)
       (transport_path_universe' P (pp b) (D b)
         (W_rectnd_beta_pp Type C (fun b0 =&gt; path_universe (D b0)) b) y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Here is the dependent eliminator *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 124
Time: 0.002s">
<div class="time" style="width: 0.047125353440151%"></div>
<pre>Definition sWtil_rect (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  : forall w, Q w.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 128
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>
  apply sigT_rect.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 129
Time: 0.006s">
<div class="time" style="width: 0.14137606032045%"></div>
<pre>
  refine (W_rect (fun w =&gt; forall x:P w, Q (w;x))
    (fun a x =&gt; scct' a x) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 132
Time: 0.015s">
<div class="time" style="width: 0.35344015080113%"></div>
<pre>
  apply (dpath_forall P (fun a b =&gt; Q (a;b)) _ _ (pp b)
    (scct' (f b)) (scct' (g b))).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 134
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 135
Time: 0.016s">
<div class="time" style="width: 0.37700282752121%"></div>
<pre>
  set (q := transport_path_universe' P (pp b) (D b)
    (W_rectnd_beta_pp Type C (fun b0 : B =&gt; path_universe (D b0)) b) y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 137
Time: 0.051s">
<div class="time" style="width: 1.2016965127238%"></div>
<pre>
  rewrite transportD_is_transport.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 138
Time: 0.126s">
<div class="time" style="width: 2.9688972667295%"></div>
<pre>
  refine (_ @ apD (scct' (g b)) q^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 139
Time: 0.095s">
<div class="time" style="width: 2.2384542884072%"></div>
<pre>
  refine (moveL_transport_V (fun x =&gt; Q (scct (g b) x)) q _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 140
Time: 0.268s">
<div class="time" style="width: 6.3147973609802%"></div>
<pre>
  rewrite transport_compose, &lt;- transport_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 141
Time: 0.098s">
<div class="time" style="width: 2.3091423185674%"></div>
<pre>
  refine (_ @ sppt' b y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 142
Time: 0.103s">
<div class="time" style="width: 2.4269557021678%"></div>
<pre>
  apply ap10, ap.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 143
Time: 0.245s">
<div class="time" style="width: 5.7728557964185%"></div>
<pre>
  refine (whiskerL _ (ap_existT P (cc (g b)) _ _ q) @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 144
Time: 0.211s">
<div class="time" style="width: 4.9717247879359%"></div>
<pre>
  exact ((path_sigma_p1_1p' _ _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 145
Time: 0.119s">
<div class="time" style="width: 2.803958529689%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 146
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* The eliminator computes on the point constructor. *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 148
Time: 0.009s">
<div class="time" style="width: 0.21206409048068%"></div>
<pre>Definition sWtil_rect_beta_cct (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  (a:A) (x:C a)
  : sWtil_rect Q scct' sppt' (scct a x) = scct' a x
  := 1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* This would be its propositional computation rule on the path constructor... *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 155
Time: 0.01s">
<div class="time" style="width: 0.23562676720075%"></div>
<pre>Definition sWtil_rect_beta_ppt (Q : sWtil -&gt; Type)
  (scct' : forall a x, Q (scct a x))
  (sppt' : forall b y, (sppt b y) # (scct' (f b) y) = scct' (g b) (D b y))
  (b:B) (y:C (f b))
  : apD (sWtil_rect Q scct' sppt') (sppt b y) = sppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 159
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 160
Time: 0.012s">
<div class="time" style="width: 0.2827521206409%"></div>
<pre>
  unfold sWtil_rect.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 161
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* ... but it's a doozy! *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Abort.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Fortunately, it turns out to be enough to have the computation rule for the *non-dependent* eliminator! *)

(* We could define that in terms of the dependent one, as usual...
Definition sWtil_rectnd (P : Type)
  (scct' : forall a (x : C a), P)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  : sWtil -&gt; P
  := sWtil_rect (fun _ =&gt; P) scct' (fun b y =&gt; transport_const _ _ @ sppt' b y).
*)

(* ...but if we define it directly, then it's easier to reason about. *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 174
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>Definition sWtil_rectnd (Q : Type)
  (scct' : forall a (x : C a), Q)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  : sWtil -&gt; Q.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 178
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>
  apply sigT_rect.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 179
Time: 0.004s">
<div class="time" style="width: 0.094250706880302%"></div>
<pre>
  refine (W_rect (fun w =&gt; P w -&gt; Q) (fun a x =&gt; scct' a x) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 180
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros b.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 181
Time: 0.013s">
<div class="time" style="width: 0.30631479736098%"></div>
<pre>
  refine (dpath_arrow P (fun _ =&gt; Q) _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  intros y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 183
Time: 0.008s">
<div class="time" style="width: 0.1885014137606%"></div>
<pre>
  refine (transport_const _ _ @ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 184
Time: 0.009s">
<div class="time" style="width: 0.21206409048068%"></div>
<pre>
  refine (sppt' b _ @ ap _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 185
Time: 0.022s">
<div class="time" style="width: 0.51837888784166%"></div>
<pre>
  refine ((transport_path_universe' P (pp b) (D b) _ _)^).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 186
Time: 0.01s">
<div class="time" style="width: 0.23562676720075%"></div>
<pre>
  exact (W_rectnd_beta_pp _ _ _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 187
Time: 0.012s">
<div class="time" style="width: 0.2827521206409%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Open Scope long_path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 190
Time: 0.005s">
<div class="time" style="width: 0.11781338360038%"></div>
<pre>

Definition sWtil_rectnd_beta_ppt (Q : Type)
  (scct' : forall a (x : C a), Q)
  (sppt' : forall b (y : C (f b)), scct' (f b) y = scct' (g b) (D b y))
  (b:B) (y: C (f b))
  : ap (sWtil_rectnd Q scct' sppt') (sppt b y) = sppt' b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 197
Time: 0.002s">
<div class="time" style="width: 0.047125353440151%"></div>
<pre>
  unfold sWtil_rectnd, sppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 198
Time: 4.244s">
<div class="time" style="width: 100%"></div>
<pre>
  refine (@ap_sigT_rectnd_path_sigma W' P Q _ _ (pp b) _ _ _ _ @ _); simpl.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 199
Time: 0.686s">
<div class="time" style="width: 16.163996229972%"></div>
<pre>
  rewrite (@W_rect_beta_pp A B f g).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 200
Time: 0.688s">
<div class="time" style="width: 16.211121583412%"></div>
<pre>
  rewrite (ap10_dpath_arrow P (fun _ =&gt; Q) (pp b) _ _ _ y).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 201
Time: 1.555s">
<div class="time" style="width: 36.639962299717%"></div>
<pre>
  repeat rewrite concat_p_pp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 202
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* Now everything cancels! *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 204
Time: 1.031s">
<div class="time" style="width: 24.293119698398%"></div>
<pre>rewrite ap_V, concat_pV_p, concat_pV_p, concat_pV_p, concat_Vp.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 204
Time: 0.002s">
<div class="time" style="width: 0.047125353440151%"></div>
<pre>
  by apply concat_1p.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 205
Time: 1.337s">
<div class="time" style="width: 31.503298774741%"></div>
<pre>
Qed.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 206
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Close Scope long_path_scope.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 208
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(* Woot! *)</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 210
Time: 0.001s">
<div class="time" style="width: 0.023562676720075%"></div>
<pre>Definition equiv_flattening : Wtil A B f g C D &lt;~&gt; sWtil.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 210
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 211
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* The maps back and forth are obtained easily from the non-dependent eliminators. *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 213
Time: 0.011s">
<div class="time" style="width: 0.25918944392083%"></div>
<pre>refine (equiv_adjointify
    (Wtil_rectnd _ scct sppt)
    (sWtil_rectnd _ cct ppt)
    _ _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* The two homotopies are completely symmetrical, using the *dependent* eliminators, but only the computation rules for the non-dependent ones. *)
 </pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0.016s">
<div class="time" style="width: 0.37700282752121%"></div>
<pre>refine (sWtil_rect _ (fun a x =&gt; 1) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 218
Time: 0.022s">
<div class="time" style="width: 0.51837888784166%"></div>
<pre>
  apply dpath_path_FFlr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 219
Time: 0.152s">
<div class="time" style="width: 3.5815268614515%"></div>
<pre>
  rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 220
Time: 0.045s">
<div class="time" style="width: 1.0603204524034%"></div>
<pre>
  rewrite sWtil_rectnd_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 221
Time: 0.038s">
<div class="time" style="width: 0.89538171536287%"></div>
<pre>
  by apply symmetry, (@Wtil_rectnd_beta_ppt A B f g C D).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 222
Time: 0.032s">
<div class="time" style="width: 0.75400565504241%"></div>
<pre>
  refine (Wtil_rect _ (fun a x =&gt; 1) _).</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros b y.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 223
Time: 0.034s">
<div class="time" style="width: 0.80113100848256%"></div>
<pre>
  apply dpath_path_FFlr.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 224
Time: 0.216s">
<div class="time" style="width: 5.0895381715363%"></div>
<pre>
  rewrite concat_1p, concat_p1.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 225
Time: 0.053s">
<div class="time" style="width: 1.248821866164%"></div>
<pre>
  rewrite Wtil_rectnd_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 226
Time: 0.043s">
<div class="time" style="width: 1.0131950989632%"></div>
<pre>
  by apply symmetry, sWtil_rectnd_beta_ppt.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 227
Time: 0.22s">
<div class="time" style="width: 5.1837888784166%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 228
Time: 0.263s">
<div class="time" style="width: 6.1969839773798%"></div>
<pre>

End AssumeAxioms.</pre>
</div>
<div class="code" title="File: Flattening.v
Line: 231
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

