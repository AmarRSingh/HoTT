<html>
<head>
<title>quotient.v</title>
<style>
.time {
  background-color: #ffaaaa;
  height: 100%;
  z-index: -1;
  position: absolute;
}
.code {
  z-index: 0;
  position: relative;
  border-style: solid;
  border-color: transparent;
  border-width: 1px;
}
.code:hover {
  border-style: solid;
  border-color: black;
  border-width: 1px;
}
pre {
  margin: 1px;
}
</style>
</head>
<body>
<h1>Timings for quotient.v</h1>

<div class="code" title="File: quotient.v
Line: 1
Time: 0.035s">
<div class="time" style="width: 89.74358974359%"></div>
<pre>Require Import Overture Fibrations types.Universe HSet PathGroupoids HProp Equivalences UnivalenceImpliesFunext.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 1
Time: 0.017s">
<div class="time" style="width: 43.589743589744%"></div>
<pre>
Require Import hit.epi minus1Trunc.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 2
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Open Local Scope path_scope.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 4
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Open Local Scope equiv_scope.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 5
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Quotient of a Type by an hprop-valued relation

We aim to model:
&lt;&lt;
Inductive quotient : Type :=
   | class_of : A -&gt; quotient
   | related_classes_eq : forall x y, (R x y), class_of x = class_of y
   | quotient_set : IsHSet quotient
&gt;&gt;
*)

(** This development should be further connected with the sections in the book; see below.*)

</pre>
</div>
<div class="code" title="File: quotient.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Module Export Quotient.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 19
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Domain.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 21
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {A : Type} (R:relation A) {sR: is_mere_relation R}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 23
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** We choose to let the definition of quotient depend on the proof that [R] is a set-relations.  Alternatively, we could have defined it for all relations and only develop the theory for set-relations.  The former seems more natural.

We do not require [R] to be an equivalence relation, but implicitly consider its transitive-reflexive closure. *)


(** Note: If we wanted to be really accurate, we'd need to put [@quotient A R sr] in the max [U_{sup(i, j)}] of the universes of [A : U_i] and [R : A -&gt; A -&gt; U_j].  But this requires some hacky code, at the moment, and the only thing we gain is avoiding making use of an implicit hpropositional resizing "axiom". *)

(** This definition has a parameter [sR] that shadows the ambient one in the Context in order to ensure that it actually ends up depending on everything in the Context when the section is closed, since its definition doesn't actually refer to any of them.  *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 32
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Private Inductive quotient {sR: is_mere_relation R} : Type :=
  | class_of : A -&gt; quotient.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 33
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** The path constructors. *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 35
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Axiom related_classes_eq : forall {x y : A}, R x y -&gt;
 class_of x = class_of y.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 36
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Axiom quotient_set : IsHSet (@quotient sR).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 38
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Global Existing Instance quotient_set.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 39
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Definition quotient_rect (P : (@quotient sR) -&gt; Type):
  forall dclass : forall x, P (class_of x),
  forall dequiv : (forall x y (H : R x y),
           transport _ (related_classes_eq H) (dclass x) = dclass y),
  forall q, P q.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 45
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 46
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ? ? [a].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply dclass.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 47
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 48
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition quotient_rect_compute : forall {P} dclass dequiv x,
  quotient_rect P dclass dequiv (class_of x) = dclass x.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 51
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 52
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
reflexivity.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 53
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 54
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Again equality of paths needs to be postulated *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 56
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>Axiom quotient_rect_compute_path : forall P dclass dequiv,
forall x y (H : R x y),
apD (quotient_rect P dclass dequiv) (related_classes_eq H)
 = dequiv x y H.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 59
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>

End Domain.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 61
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

End Quotient.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 63
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Equiv.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 65
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context `{Univalence}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 67
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Context {A : Type} (R : relation A) {sR: is_mere_relation R}
 {Htrans : Transitive R} {Hsymm : Symmetric R}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 70
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Lemma quotient_path2 : forall {x y : quotient R} (p q : x=y), p=q.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 72
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 73
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply @set_path2.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply _.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 74
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 75
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Definition in_class : quotient R -&gt; A -&gt; Type.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 77
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 78
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (@quotient_rect _ _ _ (fun _ =&gt; A -&gt; Type) R).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 79
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 80
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre> eapply concat;[apply transport_const|].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 80
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply path_forall.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro z.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 81
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply path_universe_uncurried.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 81
Time: 0.013s">
<div class="time" style="width: 33.333333333333%"></div>
<pre> apply @equiv_iff_hprop; eauto.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 81
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 82
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Context {Hrefl : Reflexive R}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 84
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Lemma in_class_pr : forall x y, in_class (class_of R x) y = R x y.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 86
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 87
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
reflexivity.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 88
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 89
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Global Instance in_class_is_prop : forall q x, IsHProp (in_class q x).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 91
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 92
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
apply (@quotient_rect A R _
    (fun q : quotient R =&gt; forall x, IsHProp (in_class q x)) (fun x y =&gt; transport _ (in_class_pr x y) (sR x y))).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 94
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 95
Time: 0.005s">
<div class="time" style="width: 12.820512820513%"></div>
<pre> apply allpath_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 95
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 96
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Lemma quotient_rect_prop (P : quotient R -&gt; hProp):
  forall dclass : forall x, P (class_of R x),
  forall q, P q.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 100
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 101
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (quotient_rect R P dclass).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 102
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 103
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre> apply allpath_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 103
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 104
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Lemma class_of_repr : forall q x, in_class q x -&gt; q = class_of R x.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 106
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 107
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
apply (@quotient_rect A R _
 (fun q : quotient R =&gt; forall x, in_class q x -&gt; q = class_of _ x)
  (fun x y H =&gt; related_classes_eq R H)).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 110
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 111
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
apply path_forall.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 112
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro z.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 112
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
apply path_forall;intro H'.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 113
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply quotient_path2.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 114
Time: 0.006s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 115
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Lemma classes_eq_related : forall x y,
class_of R x = class_of R y -&gt; R x y.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 118
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 119
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x y H'.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 120
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pattern (R x y).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 121
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
eapply transport.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply in_class_pr.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 122
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
pattern (class_of _ x).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply (transport _ (H'^)).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 123
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply Hrefl.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 124
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 125
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Thm 10.1.8 *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 127
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Open Scope equiv_scope.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 127
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Theorem sets_exact : forall x y, (class_of R x = class_of R y) &lt;~&gt; R x y.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 128
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ??.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 129
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre> apply equiv_iff_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 129
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
 apply classes_eq_related.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 130
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply related_classes_eq.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 131
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 132
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Definition quotient_rect_nondep : forall {B : Type},
  forall dclass : (forall x : A, B),
  forall dequiv : (forall x y, R x y -&gt; dclass x = dclass y),
  quotient R -&gt; B.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 137
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 138
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ? ? ?.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 139
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (quotient_rect R (fun _ : quotient _ =&gt; B)) with dclass.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 140
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ?? H'.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 141
Time: 0.003s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre> destruct (related_classes_eq R H').</pre>
</div>
<div class="code" title="File: quotient.v
Line: 141
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> by apply dequiv.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 141
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 142
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Definition quotient_rect_nondep2 {B : hSet} {dclass : (A -&gt; A -&gt; B)}:
  forall dequiv : (forall x x', R x x' -&gt; forall y y',  R y y' -&gt;
                  dclass x y = dclass x' y'),
  quotient R -&gt; quotient R -&gt; B.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 147
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 148
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intro.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 149
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
assert (dequiv0 : forall x x0 y : A, R x0 y -&gt; dclass x x0 = dclass x y)
 by (intros ? ? ? Hx; apply dequiv;[apply Hrefl|done]).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 151
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
refine (quotient_rect_nondep
  (fun x =&gt; quotient_rect_nondep (dclass x) (dequiv0 x)) _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 153
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros x x' Hx.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 154
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
apply path_forall.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 155
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> red.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 155
Time: 0.003s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>
assert (dequiv1 : forall y : A,
  quotient_rect_nondep (dclass x) (dequiv0 x) (class_of _ y) =
  quotient_rect_nondep (dclass x') (dequiv0 x') (class_of _ y))
 by (intros; by apply dequiv).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 159
Time: 0.006s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>
refine (quotient_rect R (fun q =&gt;
quotient_rect_nondep (dclass x) (dequiv0 x) q =
quotient_rect_nondep (dclass x') (dequiv0 x') q) dequiv1 _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 162
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 163
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> apply iss.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 163
Time: 0.004s">
<div class="time" style="width: 10.25641025641%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 164
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>

Definition quotient_ind : forall P : quotient _ -&gt; Type,
forall (Hprop' : forall x, IsHProp (P (class_of _ x))),
(forall x, P (class_of _ x)) -&gt; forall y, P y.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 168
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 169
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros ? ? dclass.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 170
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> apply quotient_rect with dclass.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 170
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 171
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> apply Hprop'.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 171
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 172
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** From Ch6 *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Theorem quotient_surjective: issurj (class_of _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 174
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
unfold issurj.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 175
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> apply (quotient_ind (fun y =&gt; hexists (fun x : A =&gt; class_of R x = y))).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 175
Time: 0.003s">
<div class="time" style="width: 7.6923076923077%"></div>
<pre>
 apply _.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 176
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intro x.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply min1.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 177
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> by exists x.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 177
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 178
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** From Ch10 *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 180
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>Definition quotient_ump' (B:hSet): (quotient _ -&gt; B) -&gt;
  (sigT (fun f : A-&gt; B =&gt; (forall a a0:A, R a a0 -&gt; f a =f a0))).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 181
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intro f.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 182
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> exists (compose f (class_of R) ).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 182
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 183
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold compose.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 183
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> f_ap.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 183
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> by apply related_classes_eq.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 183
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 184
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Definition quotient_ump'' (B:hSet): (sigT (fun f : A-&gt; B =&gt; (forall a a0:A, R a a0 -&gt; f a =f a0)))
 -&gt; quotient R -&gt; B.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 187
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
intros [f H'].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 188
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
apply (quotient_rect_nondep _ H').</pre>
</div>
<div class="code" title="File: quotient.v
Line: 189
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 190
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>

Theorem quotient_ump (B:hSet): (quotient _ -&gt; B) &lt;~&gt;
  (sigT (fun f : A-&gt; B =&gt; (forall a a0:A, R a a0 -&gt; f a =f a0))).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 193
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 194
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
refine (equiv_adjointify (quotient_ump' B) (quotient_ump'' B) _ _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 195
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
intros [f Hf].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 196
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: quotient.v
Line: 197
Time: 0.018s">
<div class="time" style="width: 46.153846153846%"></div>
<pre> by apply equiv_path_sigma_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 197
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
-</pre>
</div>
<div class="code" title="File: quotient.v
Line: 198
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros f.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 198
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
  apply path_forall.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 199
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  red.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 200
Time: 0.005s">
<div class="time" style="width: 12.820512820513%"></div>
<pre> apply quotient_ind;[apply _|reflexivity].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 200
Time: 0.006s">
<div class="time" style="width: 15.384615384615%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 201
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** Missing

The equivalence with VVquotient A//R.

This should lead to the unnamed theorem:
10.1.10. Equivalence relations are effective and there is an equivalence A/R&lt;~&gt;A//R. *)

(**
The theory of canonical quotients is developed by C.Cohen:
http://perso.crans.org/cohen/work/quotients/
*)

</pre>
</div>
<div class="code" title="File: quotient.v
Line: 214
Time: 0.013s">
<div class="time" style="width: 33.333333333333%"></div>
<pre>End Equiv.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 214
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

Section Kernel.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 216
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** ** Quotients of kernels of maps to sets give a surjection/mono factorization. *)

</pre>
</div>
<div class="code" title="File: quotient.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context {fs : Funext}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 219
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A function we want to factor. *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context {A B : Type} `{IsHSet B} (f : A -&gt; B).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 221
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

(** A mere relation equivalent to its kernel. *)</pre>
</div>
<div class="code" title="File: quotient.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>Context (R : relation A) {sR : is_mere_relation R}.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 223
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Context (is_ker : forall x y, f x = f y &lt;~&gt; R x y).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 224
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>

Theorem quotient_kernel_factor
  : exists (C : Type) (e : A -&gt; C) (m : C -&gt; B),
      IsHSet C * issurj e * is_mono m * (f = m o e).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 228
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
Proof.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 229
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose (C := quotient R).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 230
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  (* We put this explicitly in the context so that typeclass
  resolution will pick it up. *)
 </pre>
</div>
<div class="code" title="File: quotient.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>assert (IsHSet C) by (unfold C; apply _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 233
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists C.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 234
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  pose (e := class_of R).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 235
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists e.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 236
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre>
  transparent assert (m : (C -&gt; B)).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 237
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  {</pre>
</div>
<div class="code" title="File: quotient.v
Line: 238
Time: 0.001s">
<div class="time" style="width: 2.5641025641026%"></div>
<pre> apply quotient_rect with f.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 238
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    intros x y H.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 239
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre> transitivity (f x).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 239
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply transport_const.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 240
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 241
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre> exact ((is_ker x y) ^-1 H).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: quotient.v
Line: 241
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  exists m.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 242
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  split.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> split.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 243
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> assumption.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 244
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply quotient_surjective.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 245
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> unfold is_mono.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro u.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 246
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    apply hprop_allpath.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 247
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    assert (H : forall (x y : C) (p : m x = u) (p' : m y = u), x = y).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 248
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    {</pre>
</div>
<div class="code" title="File: quotient.v
Line: 249
Time: 0.005s">
<div class="time" style="width: 12.820512820513%"></div>
<pre> refine (quotient_rect R _ _ _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 249
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intro a.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 249
Time: 0.005s">
<div class="time" style="width: 12.820512820513%"></div>
<pre>
      refine (quotient_rect R _ _ _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> intros a' p p'; fold e in p, p'.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 250
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: quotient.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> apply related_classes_eq.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 251
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        refine (is_ker a a' _).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 252
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
        change (m (e a) = m (e a')).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 253
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
        exact (p @ p'^).</pre>
</div>
<div class="code" title="File: quotient.v
Line: 254
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: quotient.v
Line: 255
Time: 0.009s">
<div class="time" style="width: 23.076923076923%"></div>
<pre> intros; apply allpath_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 255
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
      +</pre>
</div>
<div class="code" title="File: quotient.v
Line: 256
Time: 0.019s">
<div class="time" style="width: 48.717948717949%"></div>
<pre> intros; apply allpath_hprop.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 256
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> }</pre>
</div>
<div class="code" title="File: quotient.v
Line: 256
Time: 0.002s">
<div class="time" style="width: 5.1282051282051%"></div>
<pre>
    intros [x p] [y p'].</pre>
</div>
<div class="code" title="File: quotient.v
Line: 257
Time: 0.008s">
<div class="time" style="width: 20.512820512821%"></div>
<pre>
    apply path_sigma_hprop; simpl.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 258
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
    exact (H x y p p').</pre>
</div>
<div class="code" title="File: quotient.v
Line: 259
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>
  -</pre>
</div>
<div class="code" title="File: quotient.v
Line: 260
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre> reflexivity.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 260
Time: 0.039s">
<div class="time" style="width: 100%"></div>
<pre>
Defined.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 261
Time: 0.015s">
<div class="time" style="width: 38.461538461538%"></div>
<pre>

End Kernel.</pre>
</div>
<div class="code" title="File: quotient.v
Line: 264
Time: 0s">
<div class="time" style="width: 0%"></div>
<pre>

</pre>
</div>
</body>
</html>

