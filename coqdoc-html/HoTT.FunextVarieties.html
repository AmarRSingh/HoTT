<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>HoTT.FunextVarieties</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library HoTT.FunextVarieties</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab101"></a><h1 class="section">Varieties of function extensionality</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="HoTT.Overture.html#"><span class="id" type="library">Overture</span></a> <a class="idref" href="HoTT.PathGroupoids.html#"><span class="id" type="library">PathGroupoids</span></a> <a class="idref" href="HoTT.Contractible.html#"><span class="id" type="library">Contractible</span></a> <a class="idref" href="HoTT.Equivalences.html#"><span class="id" type="library">Equivalences</span></a> <a class="idref" href="HoTT.types.UniverseLevel.html#"><span class="id" type="library">types.UniverseLevel</span></a>.<br/>
<span class="id" type="keyword">Local</span>&nbsp;<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">path_scope</span>.<br/>

<br/>
</div>

<div class="doc">
In the Overture, we defined function extensionality to be the assertion that the map <span class="inlinecode"><a class="idref" href="HoTT.Overture.html#apD10"><span class="id" type="definition">apD10</span></a></span> is an equivalence.   We now prove that this follows from a couple of weaker-looking forms of function extensionality.  We do require eta conversion, which Coq 8.4+ has judgmentally.

<div class="paragraph"> </div>

   This proof is originally due to Voevodsky; it has since been simplified by Peter Lumsdaine and Michael Shulman. 
<div class="paragraph"> </div>

 Naive funext is the simple assertion that pointwise equal functions are equal. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="NaiveFunext"><span class="id" type="definition">NaiveFunext</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">∀</span> (<span class="id" type="var">A</span> : <span class="id" type="keyword">Type</span>) (<span class="id" type="var">P</span> : <a class="idref" href="HoTT.FunextVarieties.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Type</span>) (<span class="id" type="var">f</span> <span class="id" type="var">g</span> : <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a><a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Weak funext says that a product of contractible types is contractible. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="WeakFunext"><span class="id" type="definition">WeakFunext</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">∀</span> (<span class="id" type="var">A</span> : <span class="id" type="keyword">Type</span>) (<span class="id" type="var">P</span> : <a class="idref" href="HoTT.FunextVarieties.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.Overture.html#Contr"><span class="id" type="abbreviation">Contr</span></a> (<a class="idref" href="HoTT.FunextVarieties.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>)<a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="HoTT.Overture.html#Contr"><span class="id" type="abbreviation">Contr</span></a> (<span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>).<br/>

<br/>
</div>

<div class="doc">
The obvious implications are
   Funext -&gt; NaiveFunext -&gt; WeakFunext
   
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="Funext_implies_NaiveFunext"><span class="id" type="definition">Funext_implies_NaiveFunext</span></a> : <a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="class">Funext</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="HoTT.FunextVarieties.html#NaiveFunext"><span class="id" type="definition">NaiveFunext</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">fe</span> <span class="id" type="var">A</span> <span class="id" type="var">P</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span> <span class="id" type="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (<a class="idref" href="HoTT.Overture.html#path_forall"><span class="id" type="definition">path_forall</span></a> <span class="id" type="var">f</span> <span class="id" type="var">g</span> <span class="id" type="var">h</span>).<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="NaiveFunext_implies_WeakFunext"><span class="id" type="definition">NaiveFunext_implies_WeakFunext</span></a> : <a class="idref" href="HoTT.FunextVarieties.html#NaiveFunext"><span class="id" type="definition">NaiveFunext</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="HoTT.FunextVarieties.html#WeakFunext"><span class="id" type="definition">WeakFunext</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">nf</span> <span class="id" type="var">A</span> <span class="id" type="var">P</span> <span class="id" type="var">Pc</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">∃</span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#center"><span class="id" type="method">center</span></a> (<span class="id" type="var">P</span> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">f</span>; <span class="id" type="tactic">apply</span> <span class="id" type="var">nf</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="HoTT.Overture.html#contr"><span class="id" type="method">contr</span></a>.<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The less obvious direction is that WeakFunext implies Funext (and hence all three are logically equivalent).  The point is that under weak funext, the space of "pointwise homotopies" has the same universal property as the space of paths. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Section</span> <a name="Homotopies"><span class="id" type="section">Homotopies</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Context</span> (<span class="id" type="keyword">wf</span> : <a class="idref" href="HoTT.FunextVarieties.html#WeakFunext"><span class="id" type="definition">WeakFunext</span></a>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Context</span> {<span class="id" type="var">A</span>:<span class="id" type="keyword">Type</span>} {<span class="id" type="var">B</span> : <a class="idref" href="HoTT.FunextVarieties.html#A"><span class="id" type="variable">A</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <span class="id" type="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Context</span> (<span class="id" type="var">f</span> : <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.B"><span class="id" type="variable">B</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Let</span> <a name="Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a> : <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> := <span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#idpath"><span class="id" type="constructor">idpath</span></a> (<a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>).<br/>

<br/>
</div>

<div class="doc">
Weak funext implies that the "based homotopy space" of the Pi-type is contractible, just like the based path space. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" type="keyword">Global Instance</span> <a name="contr_basedhtpy"><span class="id" type="instance">contr_basedhtpy</span></a> : <a class="idref" href="HoTT.Overture.html#Contr"><span class="id" type="abbreviation">Contr</span></a> <a class="idref" href="Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">{</span></a><span class="id" type="var">g</span> <a class="idref" href="Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">:</span></a> <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.B"><span class="id" type="variable">B</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">&amp;</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'=='_x"><span class="id" type="notation">==</span></a> <span class="id" type="var">g</span> <a class="idref" href="Coq.Init.Specif.html#:type_scope:'{'_x_':'_x_'&'_x_'}'"><span class="id" type="notation">}</span></a> | 0.<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">∃</span> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>. <span class="id" type="tactic">intros</span> [<span class="id" type="var">g</span> <span class="id" type="var">h</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">pose</span> (<span class="id" type="var">r</span> := <span class="id" type="keyword">fun</span> <span class="id" type="var">k</span> ⇒ <a class="idref" href="Coq.Init.Specif.html#existT"><span class="id" type="abbreviation">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">g</span> ⇒ <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.1'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.1'"><span class="id" type="notation">).1</span></a>) (<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.2'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.2'"><span class="id" type="notation">).2</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">pose</span> (<span class="id" type="var">s</span> := <span class="id" type="keyword">fun</span> (<span class="id" type="var">g</span> : <span class="id" type="keyword">∀</span> <span class="id" type="var">x</span>, <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.B"><span class="id" type="variable">B</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>) (<span class="id" type="var">h</span> : <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a>) <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="HoTT.FunextVarieties.html#h"><span class="id" type="variable">h</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">change</span> (<span class="id" type="var">r</span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">x</span> ⇒ <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a> <a class="idref" href="HoTT.Overture.html#idpath"><span class="id" type="constructor">idpath</span></a> (<a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#x"><span class="id" type="variable">x</span></a>)<a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>) <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">r</span> (<span class="id" type="var">s</span> <span class="id" type="var">g</span> <span class="id" type="var">h</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="HoTT.Overture.html#ap"><span class="id" type="definition">ap</span></a>; <span class="id" type="tactic">refine</span> (@<a class="idref" href="HoTT.Contractible.html#path_contr"><span class="id" type="definition">path_contr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="keyword">wf</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">x</span>; <span class="id" type="tactic">exact</span> (<a class="idref" href="HoTT.Contractible.html#contr_basedpaths"><span class="id" type="instance">contr_basedpaths</span></a> (<a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <span class="id" type="var">x</span>)).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This enables us to prove that pointwise homotopies have the same elimination rule as the identity type. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Context</span> (<span class="id" type="var">Q</span> : <span class="id" type="keyword">∀</span> <span class="id" type="var">g</span> (<span class="id" type="var">h</span> : <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a>), <span class="id" type="keyword">Type</span>).<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Context</span> (<span class="id" type="var">d</span> : <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="htpy_rect"><span class="id" type="definition">htpy_rect</span></a> <span class="id" type="var">g</span> <span class="id" type="var">h</span> : <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a> <a class="idref" href="HoTT.FunextVarieties.html#h"><span class="id" type="variable">h</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= @<a class="idref" href="HoTT.Overture.html#transport"><span class="id" type="definition">transport</span></a> <span class="id" type="var">_</span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">gh</span> ⇒ <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="HoTT.FunextVarieties.html#gh"><span class="id" type="variable">gh</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.1'"><span class="id" type="notation">.1</span></a> <a class="idref" href="HoTT.FunextVarieties.html#gh"><span class="id" type="variable">gh</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.2'"><span class="id" type="notation">.2</span></a>) <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#g"><span class="id" type="variable">g</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#h"><span class="id" type="variable">h</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="HoTT.Contractible.html#path_contr"><span class="id" type="definition">path_contr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>) <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.d"><span class="id" type="variable">d</span></a>.<br/>

<br/>
</div>

<div class="doc">
The computation rule, of course, is only propositional. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" type="keyword">Definition</span> <a name="htpy_rect_beta"><span class="id" type="definition">htpy_rect_beta</span></a> : <a class="idref" href="HoTT.FunextVarieties.html#htpy_rect"><span class="id" type="definition">htpy_rect</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.d"><span class="id" type="variable">d</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <a class="idref" href="HoTT.Overture.html#transport"><span class="id" type="definition">transport</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> : <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="HoTT.Overture.html#transport"><span class="id" type="definition">transport</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">gh</span> ⇒ <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="HoTT.FunextVarieties.html#gh"><span class="id" type="variable">gh</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.1'"><span class="id" type="notation">.1</span></a> <a class="idref" href="HoTT.FunextVarieties.html#gh"><span class="id" type="variable">gh</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:x_'.2'"><span class="id" type="notation">.2</span></a>) <a class="idref" href="HoTT.FunextVarieties.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.d"><span class="id" type="variable">d</span></a> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies.d"><span class="id" type="variable">d</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="HoTT.Overture.html#:path_scope:x_'^'"><span class="id" type="notation">(</span></a>@<a class="idref" href="HoTT.Contractible.html#path2_contr"><span class="id" type="definition">path2_contr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="HoTT.Contractible.html#path_contr"><span class="id" type="definition">path_contr</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a> <a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">(</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.f"><span class="id" type="variable">f</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">;</span></a><a class="idref" href="HoTT.FunextVarieties.html#Homotopies.idhtpy"><span class="id" type="variable">idhtpy</span></a><a class="idref" href="HoTT.Overture.html#:fibration_scope:'('_x_';'_x_')'"><span class="id" type="notation">)</span></a>) (<a class="idref" href="HoTT.Overture.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">_</span>)<a class="idref" href="HoTT.Overture.html#:path_scope:x_'^'"><span class="id" type="notation">)^</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="HoTT.Overture.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">_</span>).<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="HoTT.FunextVarieties.html#Homotopies"><span class="id" type="section">Homotopies</span></a>.<br/>

<br/>
</div>

<div class="doc">
Now the proof is fairly easy; we can just use the same induction principle on both sides. 
</div>
<div class="code">
<span class="id" type="keyword">Theorem</span> <a name="WeakFunext_implies_Funext"><span class="id" type="lemma">WeakFunext_implies_Funext</span></a> : <a class="idref" href="HoTT.FunextVarieties.html#WeakFunext"><span class="id" type="definition">WeakFunext</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="class">Funext</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="keyword">wf</span>; <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">A</span> <span class="id" type="var">B</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">refine</span> (<a class="idref" href="HoTT.Equivalences.html#isequiv_adjointify"><span class="id" type="definition">isequiv_adjointify</span></a> (@<a class="idref" href="HoTT.Overture.html#apD10"><span class="id" type="definition">apD10</span></a> <span class="id" type="var">A</span> <span class="id" type="var">B</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="HoTT.FunextVarieties.html#htpy_rect"><span class="id" type="definition">htpy_rect</span></a> <span class="id" type="keyword">wf</span> <span class="id" type="var">f</span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">g'</span> <span class="id" type="var">_</span> ⇒ <span class="id" type="var">f</span> <a class="idref" href="HoTT.Overture.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="HoTT.FunextVarieties.html#g'"><span class="id" type="variable">g'</span></a>) <a class="idref" href="HoTT.Overture.html#idpath"><span class="id" type="constructor">idpath</span></a> <span class="id" type="var">g</span>) <span class="id" type="var">_</span> <span class="id" type="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" type="var">revert</span> <span class="id" type="var">g</span>; <span class="id" type="tactic">refine</span> (<a class="idref" href="HoTT.FunextVarieties.html#htpy_rect"><span class="id" type="definition">htpy_rect</span></a> <span class="id" type="keyword">wf</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">refine</span> (<a class="idref" href="HoTT.Overture.html#ap"><span class="id" type="definition">ap</span></a> <span class="id" type="var">_</span> (<a class="idref" href="HoTT.FunextVarieties.html#htpy_rect_beta"><span class="id" type="definition">htpy_rect_beta</span></a> <span class="id" type="keyword">wf</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">h</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">refine</span> (<a class="idref" href="HoTT.FunextVarieties.html#htpy_rect_beta"><span class="id" type="definition">htpy_rect_beta</span></a> <span class="id" type="keyword">wf</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>).<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We add some hints to the typeclass database, so if we happen to have hypotheses of <span class="inlinecode"><a class="idref" href="HoTT.FunextVarieties.html#WeakFunext"><span class="id" type="definition">WeakFunext</span></a></span> or <span class="inlinecode"><a class="idref" href="HoTT.FunextVarieties.html#NaiveFunext"><span class="id" type="definition">NaiveFunext</span></a></span> floating around, we get <span class="inlinecode"><a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="record">Funext</span></a></span> automatically. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="NaiveFunext_implies_Funext"><span class="id" type="definition">NaiveFunext_implies_Funext</span></a> : <a class="idref" href="HoTT.FunextVarieties.html#NaiveFunext"><span class="id" type="definition">NaiveFunext</span></a> <a class="idref" href="Coq.Init.Logic.html#:type_scope:x_'->'_x"><span class="id" type="notation">→</span></a> <a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="class">Funext</span></a><br/>
&nbsp;&nbsp;:= <a class="idref" href="HoTT.FunextVarieties.html#WeakFunext_implies_Funext"><span class="id" type="lemma">WeakFunext_implies_Funext</span></a> <a class="idref" href="HoTT.Overture.html#:function_scope:x_'o'_x"><span class="id" type="notation">o</span></a> <a class="idref" href="HoTT.FunextVarieties.html#NaiveFunext_implies_WeakFunext"><span class="id" type="definition">NaiveFunext_implies_WeakFunext</span></a>.<br/>

<br/>
<span class="id" type="keyword">Hint Immediate</span> <span class="id" type="var">WeakFunext_implies_Funext</span> <span class="id" type="var">NaiveFunext_implies_Funext</span> : <span class="id" type="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab102"></a><h2 class="section">Functional extensionality is downward closed</h2>
 If universe <span class="inlinecode"><span class="id" type="var">U_i</span></span> is functionally extensional, then so are universes <span class="inlinecode"><span class="id" type="var">U_j</span></span> for <span class="inlinecode"><a class="idref" href="HoTT.categories.Category.Morphisms.html#j"><span class="id" type="variable">j</span></a></span> <span class="inlinecode">≤</span> <span class="inlinecode"><a class="idref" href="HoTT.PathGroupoids.html#i"><span class="id" type="variable">i</span></a></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="Funext_downward_closed"><span class="id" type="lemma">Funext_downward_closed</span></a> `{<span class="id" type="var">H</span> : <a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="class">Funext</span></a>} : <a class="idref" href="HoTT.Overture.html#Funext"><span class="id" type="class">Funext</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">A</span> <span class="id" type="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">exact</span> (@<a class="idref" href="HoTT.Overture.html#isequiv_apD10"><span class="id" type="method">isequiv_apD10</span></a> <span class="id" type="var">H</span> (<a class="idref" href="HoTT.types.UniverseLevel.html#Lift"><span class="id" type="definition">Lift</span></a> <span class="id" type="var">A</span>) (<span class="id" type="keyword">fun</span> <span class="id" type="var">a</span> ⇒ <a class="idref" href="HoTT.types.UniverseLevel.html#Lift"><span class="id" type="definition">Lift</span></a> (<span class="id" type="var">P</span> <a class="idref" href="HoTT.FunextVarieties.html#a"><span class="id" type="variable">a</span></a>))).<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We permit the use of <span class="inlinecode"><a class="idref" href="HoTT.FunextVarieties.html#Funext_downward_closed"><span class="id" type="lemma">Funext_downward_closed</span></a></span> exactly once in typeclass resolution.  So long as typeclass resolution backtracks on instances of functional extensionality, this will hopefully mean that we'll never need to worry about instances of functional extensionality, at least when we make definitions all in one go. 
</div>
<div class="code">
<span class="id" type="keyword">Hint Immediate</span> <span class="id" type="var">Funext_downward_closed</span> : <span class="id" type="var">typeclass_instances</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>